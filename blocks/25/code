#include <stdio.h>
#include <string.h>
#include <utility>

typedef std::pair<int,int> ii;

/*
1v2
1v3
1v4
2v3
2v4
3v4
*/

ii double_up(int gn)
{
    int a,b;
    if(gn==1)
    {
        a=1;b=2;
    }
    else if(gn==2)
    {
        a=1;b=3;
    }
    else if(gn==3)
    {
        a=1;b=4;
    }
    else if(gn==4)
    {
        a=2;b=3;
    }
    else if(gn==5)
    {
        a=2;b=4;
    }
    else if(gn==6)
    {
        a=3;b=4;
    }
    return {a,b};
}


int res[5];
int games_played[5][5];
int gstack[7];
int wins=0,fav;

void play(int gn)
{
    if(gn>6)
    {
        memset(res,0,sizeof(res));
        ii gp;
        for(int g=1;g<=6;++g)
        {
            gp=double_up(g);
            if(gstack[g]==3) res[gp.first]+=3;
            else if(gstack[g]==0) res[gp.second]+=3;
            else
            {
                ++res[gp.first];
                ++res[gp.second];
            }
        }
        bool win=true;
        for(int other=1;other<=4;++other)
        {
            if(other!=fav&&res[other]>=res[fav])
            {
                win=false;
                break;
            }
        }

        if(win) ++wins;

        return;
    }

    ii gp=double_up(gn);

    if(games_played[gp.first][gp.second]!=0x3f3f3f3f)
    {
        gstack[gn]=games_played[gp.first][gp.second];
        play(gn+1);
    }
    else
    {
        gstack[gn]=0;
        play(gn+1);
        gstack[gn]=1;
        play(gn+1);
        gstack[gn]=3;
        play(gn+1);
    }
}

int main()
{
    memset(games_played,0x3f,sizeof(games_played));
    int n,a,b,sa,sb;
    scanf("%d%d",&fav,&n);

    for(int loop=0;loop<n;++loop)
    {
        scanf("%d%d%d%d",&a,&b,&sa,&sb);
        if(sa>sb) games_played[a][b]=3;
        else if(sa<sb) games_played[a][b]=0;
        else games_played[a][b]=1;
    }

    play(1);
    printf("%d\n",wins);
}